AKI-3694とLM61を使った温度計の製作

製作方法等
    1.正しく組み立てる。
    2.AKI-3694のジャンパーをプログラム書き換え位置に設定する。
    3.USB-シリアル変換モジュールにUSBケーブルを差し、PCと接続する。
    4.適当なライタプログラム（本稿稿末も参照）でプログラムを書き込む。
    5.書き込みが正常に終了したらUSBケーブルを抜く。
    6.AKI-3694のジャンパーを実行位置に設定する。
    7.USB-シリアル変換モジュールにUSBケーブルを差し、PCと接続する。
    8.LCDに気温が表示される。
    9.時刻の設定はPCからUnix秒を送り込む事で行う。例 date '+%s' > /dev/ttyUSB0
    10.PCからの送信文が数字で始まらない場合は、メッセージとしてLCDに表示される。天気予報や
    　　メール着信の通知等として利用できる。

ファイルの説明
    README      このファイル
    履歴.txt      製作の記録
    AKI3694modifi.png   秋月のキットの改造部分を示す。
    h8300ROM_LM61.PNG   回路図
    h8300ROM_LM61.CE3   びーすけ 0.70.00　で書いた回路図
    iodefine.h  借りてきたIO定義ファイル
    main.c
    main.ref    リファレンス出力
    main.mot    書き込み用１６進ファイル
    mystartup.s 
    monitor.c   簡易モニタ（バグあり）
    monitorsub.s    簡易モニタのサブルーチン
    data.c      LED点灯用のデータ。モニタのおまけ。本機では未使用。
    lcd.c       秋月の液晶モジュール用。パラメータは5V用に調整。
    lcd.h
    sci.c       シリアルポート用のサブルーチン。
    Makefile
    
主な問題点
    単独操作不可
        本機上に時刻設定用のスイッチを設けていないため、時計の設定ができません。時計として
        使う場合はPCからUnix秒を送り込んで時刻設定する必要があります。
        PCのUSBポートの給電機能を有効にしておけば、PCをシャットダウンしても温度計付き
        時計として機能します。
        計時そのものは3694のタイムベースを用いており、概ね正確と思われます。（誤差未確認）
        
    温度報告機能
        時刻データを受信すると、直前の温度計測結果をシリアルポートに出力します。これをPC側で
        読み出すことで自動観測を実現できます。定期的に時刻データを送り込むには、例えばcronを
        使えば簡単です。
        但し、時刻設定後にこのデータを読み出さなかった場合、PC側の受信バッファがおかしく
        なるかも知れません。
        
    LM61の補正
        温度センサーのLM61ですが、BIZとCIZがあってBIZのほうが誤差が小さいようです。
        いずれにせよ、正しく観測するには補正が必要になります。データシートを見る限り、２５℃
        を頂点とした「への字」（あるいは逆さ「への字」）特性を示すらしいのですが、実際は
        こんなに単純なものではありません。校正用温度計を用意して氷点下１０℃位から５０℃位
        まで、データ取りする必要があります。
        本機では実際の計測結果を見ながら複数の一次関数（要するに雑な折れ線グラフ）で補正して
        いますが、６℃以下及び３０℃以上で誤差が大きく（数℃程度）なります。
        
    ビルド上の注意
        H8/300H向けのgccは 32ビットLinux上で4.4.6をビルドして使っています。どういう訳か 
        他のバージョンや64ビット環境ではうまく動かすことができず、ホスト(Linux,amd64)上で
        VirtualBox経由で32ビットLinuxを動かし、共有フォルダ及びssh経由で動かしています。
        参考サイト( https://www.soramimi.jp/h8300gcc/index.html )に従ってhmsに
        していますが、最終的に motファイルが得られれば良いので elfでもいいと思います。
        （hmsは廃止されたと聞きましたのでelf一択かも知れません）

ライセンス
    iodefine.h は ルネサスのプロジェクトジェネレータが生成したものです。著作権はルネサスに
    帰属します（多分）。
    上記以外は BSD ライセンスです。
    
その他
    書き込みには     
    h8write.c (みついわゆきお氏による書き込みプログラム ( http://mes.osdn.jp/h8/index-j.html ))を
    使用しています。
